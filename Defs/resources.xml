<?xml version="1.0" encoding="utf-8" ?>
<Defs>
    <StuffCategoryDef>
        <defName>IceBlocky</defName>
        <label>ice blocks</label>
    </StuffCategoryDef>

    <ThingCategoryDef>
        <defName>IcyBlocks</defName>
        <label>icy blocks</label>
        <iconPath>UI/Icons/ThingCategories/StoneBlocks</iconPath>
        <resourceReadoutRoot>true</resourceReadoutRoot>
        <parent>ResourcesRaw</parent>
    </ThingCategoryDef>

    <ThingDef Name="IcyBlocksBase" ParentName="ResourceBase" Abstract="True">
        <graphicData>
            <graphicClass>Graphic_StackCount</graphicClass>
            <texPath>Things/Item/Resource/StoneBlocks</texPath>
        </graphicData>
        <uiIconForStackCount>75</uiIconForStackCount>
        <stuffProps>
            <appearance>Bricks</appearance>
            <categories>
                <li>IceBlocky</li>
            </categories>
            <soundImpactStuff>BulletImpact_Ground</soundImpactStuff>
            <soundMeleeHitSharp>MeleeHit_Stone</soundMeleeHitSharp>
            <soundMeleeHitBlunt>BulletImpact_Ground</soundMeleeHitBlunt>
        </stuffProps>

        <useHitPoints>true</useHitPoints>
        <thingCategories>
            <li>IcyBlocks</li>
        </thingCategories>
        <tickerType>Rare</tickerType>
        <socialPropernessMatters>false</socialPropernessMatters>
        <comps>
            <li>
                <compClass>CompMelter</compClass>
            </li>
        </comps>
    </ThingDef>

    <RecipeDef Name="MakeIcyBlocksBase" Abstract="True">
        <jobString>Making icecrete blocks.</jobString>

        <recipeUsers>
            <li>CraftingSpot</li>
        </recipeUsers>
        <workSkill>Crafting</workSkill>
        <workSkillLearnFactor>0.2</workSkillLearnFactor>
        <workSpeedStat>UnskilledLaborSpeed</workSpeedStat>
        <effectWorking>Sculpt</effectWorking>
        <soundWorking>Recipe_Sculpt</soundWorking>
        <allowMixingIngredients>true</allowMixingIngredients>
        <ingredients>
            <li>
                <filter>
                    <thingDefs>
                        <li>IcePellets</li>
                    </thingDefs>
                </filter>
                <count>50</count>
            </li>
        </ingredients>
        <fixedIngredientFilter>
            <thingDefs>
                <li>IcePellets</li>
            </thingDefs>
        </fixedIngredientFilter>
    </RecipeDef>



    <ThingDef ParentName="ResourceBase">
        <defName>IcePellets</defName>
        <label>ice pellets</label>
        <description>Small ice pellets that can be further processed into blocks.</description>

        <graphicData>
            <graphicClass>Graphic_StackCount</graphicClass>
            <texPath>Things/Item/Resource/AnimalProductRaw/EggRound</texPath>
            <color>(160, 200, 220)</color>
        </graphicData>
        <uiIconForStackCount>75</uiIconForStackCount>

        <useHitPoints>true</useHitPoints>
        <statBases>
            <MaxHitPoints>5</MaxHitPoints>
            <DeteriorationRate>1</DeteriorationRate>
            <Flammability>0</Flammability>
            <Mass>0.0009</Mass>
            <MarketValue>0.01</MarketValue>
        </statBases>
        <tradeability>None</tradeability>
        <thingCategories>
            <li>Manufactured</li>
        </thingCategories>
        <tickerType>Rare</tickerType>
        <socialPropernessMatters>false</socialPropernessMatters>
        <comps>
            <li>
                <compClass>CompMelter</compClass>
            </li>
        </comps>
    </ThingDef>

    <ThingDef ParentName="BuildingBase">
        <defName>IceMaker</defName>
        <label>ice-maker</label>
        <description>Slowly generates ice pellets, by freezing water.</description>

        <graphicData>
            <texPath>Things/Building/Special/InfiniteChemreactor</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <drawSize>(3, 3)</drawSize>
            <shadowData>
                <volume>(1.8, 1.0, 0.2)</volume>
                <offset>(0.0, 0.0, -0.4)</offset>
            </shadowData>
        </graphicData>
        <altitudeLayer>Building</altitudeLayer>
        <rotatable>false</rotatable>
        <uiIconScale>0.8</uiIconScale>

        <thingCategories>
            <li>BuildingsSpecial</li>
        </thingCategories>
        <costList>
            <Steel>50</Steel>
            <ComponentIndustrial>1</ComponentIndustrial>
        </costList>
        <comps>
            <li Class="CompProperties_Power">
                <compClass>CompPowerTrader</compClass>
                <basePowerConsumption>200</basePowerConsumption>
            </li>
            <li Class="CompProperties_Breakdownable"/>
            <li Class="CompProperties_Flickable"/>
            <li Class="CompProperties_Spawner">
                <requiresPower>true</requiresPower>
                <thingToSpawn>IcePellets</thingToSpawn>
                <spawnCount>15</spawnCount>
                <spawnIntervalRange>
                    <!-- 100000 = 1.7 days in-game -->
                    <min>50000</min>
                    <max>70000</max>
                </spawnIntervalRange>
                <writeTimeLeftToSpawn>true</writeTimeLeftToSpawn>
            </li>
            <li Class="CompProperties_Glower">
                <glowRadius>2</glowRadius>
                <glowColor>(50,50,200,0)</glowColor>
            </li>
        </comps>
        <designationCategory>Production</designationCategory>
        <constructionSkillPrerequisite>4</constructionSkillPrerequisite>
        <statBases>
            <Mass>100</Mass>
            <Beauty>-10</Beauty>
            <WorkToBuild>1500</WorkToBuild>
            <MaxHitPoints>50</MaxHitPoints>
            <Flammability>1.0</Flammability>
        </statBases>
        <tickerType>Normal</tickerType>
        <size>(2, 2)</size>
        <fillPercent>0.4</fillPercent> <!-- cover % in combat -->
        <terrainAffordanceNeeded>Light</terrainAffordanceNeeded>
        <passability>Impassable</passability>
        <canOverlapZones>false</canOverlapZones>
        <minifiedDef>MinifiedThing</minifiedDef>
        <tradeability>None</tradeability>
    </ThingDef>



    <ThingDef ParentName="IcyBlocksBase">
        <defName>IceBlocks</defName>
        <label>ice blocks</label>
        <description>Made from pure ice, these blocks are easily damaged.</description>

        <graphicData>
            <color>(160, 200, 220)</color>
        </graphicData>

        <stuffProps>
            <color>(160, 200, 220)</color>
            <stuffAdjective>pure</stuffAdjective>
            <statFactors>
                <MarketValue>1.0</MarketValue>
                <Flammability>0</Flammability>
                <Beauty>1.0</Beauty>
                <MaxHitPoints>1.0</MaxHitPoints>
                <WorkToBuild>1.0</WorkToBuild>
                <WorkToMake>1.0</WorkToMake>
            </statFactors>
        </stuffProps>
        <statBases>
            <MaxHitPoints>50</MaxHitPoints>
            <DeteriorationRate>5</DeteriorationRate>
            <Flammability>0</Flammability>
            <Mass>0.5</Mass>
            <MarketValue>0.1</MarketValue>
        </statBases>
        <tradeability>Buyable</tradeability>
    </ThingDef>

    <RecipeDef ParentName="MakeIcyBlocksBase">
        <defName>MakeIceBlocks</defName>
        <label>make ice blocks</label>
        <description>Compress a batch of ice pellets into larger, usable blocks.</description>

        <products>
            <IceBlocks>35</IceBlocks>
        </products>
        <targetCountAdjustment>35</targetCountAdjustment>
        <workAmount>2000</workAmount>
        <researchPrerequisite>IceResearch</researchPrerequisite>
    </RecipeDef>



    <ThingDef ParentName="IcyBlocksBase">
        <defName>IcecreteBlocksWood</defName>
        <label>icecrete (wood pulp) blocks</label>
        <description>Made from ice mixed with wood pulp, these blocks are a very sturdy building material.</description>

        <graphicData>
            <color>(160, 120, 90)</color>
        </graphicData>
        <stuffProps>
            <color>(160, 120, 90)</color>
            <stuffAdjective>icecrete (wood pulp)</stuffAdjective>
            <statFactors>
                <MarketValue>1.3</MarketValue>
                <Flammability>0.2</Flammability>
                <Beauty>-0.6</Beauty>
                <MaxHitPoints>4.0</MaxHitPoints>
                <WorkToBuild>4.0</WorkToBuild>
                <WorkToMake>4.0</WorkToMake>
            </statFactors>
        </stuffProps>
        <statBases>
            <MaxHitPoints>200</MaxHitPoints>
            <DeteriorationRate>10</DeteriorationRate>
            <Flammability>0.2</Flammability>
            <Mass>0.7</Mass>
            <MarketValue>1.0</MarketValue>
        </statBases>
        <tradeability>Buyable</tradeability>
    </ThingDef>

    <RecipeDef ParentName="MakeIcyBlocksBase">
        <defName>MakeIcecreteBlocksWood</defName>
        <label>make icecrete blocks (wood)</label>
        <description>Mix ice pellets with wood pulp, to form strong icecrete blocks.</description>

        <ingredients>
            <li>
                <filter>
                    <thingDefs>
                        <li>WoodLog</li>
                    </thingDefs>
                </filter>
                <count>1</count>
            </li>
        </ingredients>
        <fixedIngredientFilter>
            <thingDefs>
                <li>WoodLog</li>
            </thingDefs>
        </fixedIngredientFilter>
        <products>
            <IcecreteBlocksWood>50</IcecreteBlocksWood>
        </products>
        <targetCountAdjustment>50</targetCountAdjustment>
        <workAmount>2500</workAmount>
        <researchPrerequisite>IcecreteResearch</researchPrerequisite>
    </RecipeDef>


    <ThingDef ParentName="IcyBlocksBase">
        <defName>IcecreteBlocksHay</defName>
        <label>icecrete (hay) blocks</label>
        <description>Made from ice mixed with hay, these blocks are a fairly sturdy building material.</description>

        <graphicData>
            <color>(130, 230, 170)</color>
        </graphicData>
        <stuffProps>
            <color>(130, 230, 170)</color>
            <stuffAdjective>icecrete (hay)</stuffAdjective>
            <statFactors>
                <MarketValue>1.1</MarketValue>
                <Flammability>0.1</Flammability>
                <Beauty>0.3</Beauty>
                <MaxHitPoints>2.0</MaxHitPoints>
                <WorkToBuild>2.0</WorkToBuild>
                <WorkToMake>2.0</WorkToMake>
            </statFactors>
        </stuffProps>
        <statBases>
            <MaxHitPoints>100</MaxHitPoints>
            <DeteriorationRate>5</DeteriorationRate>
            <Flammability>0.1</Flammability>
            <Mass>0.6</Mass>
            <MarketValue>0.8</MarketValue>
        </statBases>
        <tradeability>Buyable</tradeability>
    </ThingDef>

    <RecipeDef ParentName="MakeIcyBlocksBase">
        <defName>MakeIcecreteBlocksHay</defName>
        <label>make icecrete blocks (hay)</label>
        <description>Mix ice pellets with hay fibres, to form strong icecrete blocks.</description>

        <ingredients>
            <li>
                <filter>
                    <thingDefs>
                        <li>Hay</li>
                    </thingDefs>
                </filter>
                <count>30</count>
            </li>
        </ingredients>
        <fixedIngredientFilter>
            <thingDefs>
                <li>Hay</li>
            </thingDefs>
        </fixedIngredientFilter>
        <products>
            <IcecreteBlocksHay>40</IcecreteBlocksHay>
        </products>
        <targetCountAdjustment>40</targetCountAdjustment>
        <workAmount>2200</workAmount>
        <researchPrerequisite>IcecreteResearch</researchPrerequisite>
    </RecipeDef>


    <ThingDef ParentName="IcyBlocksBase">
        <defName>IcecreteBlocksCloth</defName>
        <label>icecrete (cloth) blocks</label>
        <description>Made from ice mixed with cloth fibres, these blocks are a more sturdy building material.</description>

        <graphicData>
            <color>(60, 100, 120)</color>
        </graphicData>
        <stuffProps>
            <color>(60, 100, 120)</color>
            <stuffAdjective>icecrete (cloth)</stuffAdjective>
            <statFactors>
                <MarketValue>1.2</MarketValue>
                <Flammability>0.15</Flammability>
                <Beauty>0.4</Beauty>
                <MaxHitPoints>1.5</MaxHitPoints>
                <WorkToBuild>1.5</WorkToBuild>
                <WorkToMake>1.5</WorkToMake>
            </statFactors>
        </stuffProps>
        <statBases>
            <MaxHitPoints>75</MaxHitPoints>
            <DeteriorationRate>5</DeteriorationRate>
            <Flammability>0.15</Flammability>
            <Mass>0.5</Mass>
            <MarketValue>0.7</MarketValue>
        </statBases>
        <tradeability>Buyable</tradeability>
    </ThingDef>

    <RecipeDef ParentName="MakeIcyBlocksBase">
        <defName>MakeIcecreteBlocksCloth</defName>
        <label>make icecrete blocks (cloth)</label>
        <description>Mix ice pellets with cloth fibres, to form strong icecrete blocks.</description>

        <ingredients>
            <li>
                <filter>
                    <thingDefs>
                        <li>Cloth</li>
                    </thingDefs>
                </filter>
                <count>40</count>
            </li>
        </ingredients>
        <fixedIngredientFilter>
            <thingDefs>
                <li>Cloth</li>
            </thingDefs>
        </fixedIngredientFilter>
        <products>
            <IcecreteBlocksCloth>45</IcecreteBlocksCloth>
        </products>
        <targetCountAdjustment>45</targetCountAdjustment>
        <workAmount>2300</workAmount>
        <researchPrerequisite>IcecreteResearch</researchPrerequisite>
    </RecipeDef>
</Defs>